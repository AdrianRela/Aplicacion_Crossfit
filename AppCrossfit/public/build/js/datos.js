function iniciarAppCrossfit(){CambiarContenedor(),marcarTabsActual(),consultaAPISuscripcion(),consultaAPIListaReservas()}function CambiarContenedor(){try{var e=document.querySelector(".contenedor-app");null!==e&&(e.classList.remove("contenedor-app"),e.classList.add("contenedor-app2"))}catch(e){console.error("Error al cambiar el contenedor:",e)}}function marcarTabsActual(){const e=window.location.href,t=document.querySelectorAll(".tabs a");for(let n=0;n<t.length;n++){let a=t[n];e===a.getAttribute("href")&&a.classList.add("actual")}}function quitarAlerta(){const e=document.querySelector(".alerta");e&&setTimeout(()=>{e.remove()},3e3)}async function consultaAPISuscripcion(){try{const e="/AppCrossfit/api/suscripcion",t=await fetch(e);mostrarCupon(await t.json())}catch(e){console.log(e)}}function mostrarCupon(e){const{creditos_utilizados:t,creditos_disponibles:n,fecha_finalizacion:a,fecha_suscripcion:o}=e;document.getElementById("valor-utilizados").textContent+=t;document.getElementById("valor-disponibles").textContent+=n;document.getElementById("valor-periodo").textContent+=o+" - "+a;document.getElementById("valor-caducidad").textContent+=a}async function consultaAPIListaReservas(){try{const e="/AppCrossfit/api/lista-reservas",t=await fetch(e);mostrarListaReservas(await t.json())}catch(e){console.log(e)}}function mostrarListaReservas(e){if(0==e.length){const e=document.createElement("p");e.innerHTML="Actualmente no tiene Reservas",e.className="p-sin-reserva";const t=document.querySelector("#lista-reservas");t&&t.append(e)}let t=1;e.forEach(e=>{const{id_clase:n,fecha_actividad:a,hora:o,tipo:c}=e,i=document.createElement("div");i.className="boton-eliminar";const s=document.createElement("input");s.value="X",s.id=n,s.type="submit",s.className=a,s.addEventListener("click",eliminarReserva);const r=document.createElement("p");let d=a.split("-");r.innerHTML="<span>Fecha Actividad: </span>"+d[2]+"-"+d[1]+"-"+d[0];const l=document.createElement("p");l.innerHTML="<span>Hora Actividad: </span>"+o;const u=document.createElement("p");u.innerHTML="<span>Tipo Actividad: </span>"+c;const m=document.createElement("h4");m.textContent="Reserva "+t;const p=document.createElement("div");p.className="texto-reservas",i.append(m),i.append(s),p.append(r),p.append(l),p.append(u);const v=document.querySelector("#lista-reservas");v&&(v.append(i),v.append(p)),t++})}function eliminarReserva(e){Swal.fire({title:"¿Desea cancelar la reserva?",icon:"question",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No"}).then(t=>{if(t.isConfirmed){const t=e.target,n=t.id,a=t.classList.toString(),o=document.createElement("form");o.action="/AppCrossfit/dashboard-misdatos",o.method="POST";const c=document.createElement("input");c.type="hidden",c.name="id_clase",c.value=n;const i=document.createElement("input");i.type="hidden",i.name="fecha_actividad",i.value=a,o.appendChild(c),o.appendChild(i),document.body.appendChild(o),console.log(o),o.submit(),document.body.removeChild(o)}})}document.addEventListener("DOMContentLoaded",(function(){iniciarAppCrossfit()}));var verificarDivInterval=setInterval((function(){document.getElementById("alert")&&(clearInterval(verificarDivInterval),quitarAlerta())}),1e3);